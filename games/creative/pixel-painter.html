<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Painter Pro - Creative Games</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        premium: {
                            dark: '#1a1a2e',
                            light: '#f8f9fa',
                            accent: '#4f46e5',
                            gold: '#FFD700'
                        }
                    },
                    fontFamily: {
                        'sans': ['"Inter"', 'system-ui', 'sans-serif'],
                        'display': ['"Poppins"', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap');
        
        .pixel {
            transition: background-color 0.1s ease;
            box-shadow: inset 0 0 1px rgba(0,0,0,0.1);
        }
        
        .pixel:hover {
            transform: scale(1.05);
            z-index: 1;
        }
        
        .color-swatch {
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .color-swatch:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .color-swatch.active {
            transform: scale(1.15);
            box-shadow: 0 0 0 3px white, 0 0 0 5px currentColor;
        }
        
        .premium-border {
            border: 2px solid;
            border-image: linear-gradient(45deg, #4f46e5, #FFD700, #4f46e5) 1;
        }
        
        .glow-text {
            text-shadow: 0 0 8px rgba(79, 70, 229, 0.5);
        }
        
        @media (max-width: 640px) {
            .pixel {
                width: 12px !important;
                height: 12px !important;
            }
        }
    </style>
</head>
<body class="bg-premium-light dark:bg-premium-dark text-gray-900 dark:text-white min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8 animate__animated animate__fadeIn">
            <h1 class="text-5xl font-bold mb-2 font-display bg-gradient-to-r from-premium-accent to-premium-gold bg-clip-text text-transparent">Pixel Painter Pro</h1>
            <p class="text-lg text-gray-600 dark:text-gray-300 mb-4">Create stunning pixel art masterpieces</p>
            <a href="../../index.html" class="inline-flex items-center text-premium-accent dark:text-premium-gold hover:text-premium-gold dark:hover:text-premium-gold transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
                Back to Portfolio
            </a>
        </div>

        <div class="max-w-4xl mx-auto animate__animated animate__fadeInUp">
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl premium-border">
                <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
                    <div class="flex flex-wrap gap-2">
                        <input type="color" id="color-picker" class="w-12 h-10 cursor-pointer rounded-lg border-2 border-gray-300 dark:border-gray-600 hover:border-premium-accent transition-all" value="#000000" title="Select color">
                        
                        <button id="eraser" class="flex items-center gap-1 bg-gray-200 dark:bg-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                            </svg>
                            Eraser
                        </button>
                        
                        <button id="clear" class="flex items-center gap-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                            Clear
                        </button>
                    </div>
                    
                    <div class="flex flex-wrap gap-2">
                        <div class="relative">
                            <select id="grid-size" class="appearance-none bg-gray-200 dark:bg-gray-700 px-4 py-2 pr-8 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-all cursor-pointer">
                                <option value="16">16×16</option>
                                <option value="24">24×24</option>
                                <option value="32" selected>32×32</option>
                                <option value="48">48×48</option>
                                <option value="64">64×64</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
                                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                    <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
                                </svg>
                            </div>
                        </div>
                        
                        <button id="save" class="flex items-center gap-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                            Save
                        </button>
                    </div>
                </div>

                <div class="flex justify-center mb-6">
                    <div id="color-palette" class="flex flex-wrap gap-2 max-w-md justify-center"></div>
                </div>

                <div class="flex justify-center mb-6">
                    <div id="current-color-display" class="w-10 h-10 rounded-lg border-2 border-gray-300 dark:border-gray-600" style="background-color: #000000;"></div>
                </div>

                <div class="flex justify-center overflow-auto py-4">
                    <div id="pixel-grid" class="border-2 border-gray-300 dark:border-gray-600 bg-white grid"></div>
                </div>

                <div class="mt-6 text-center">
                    <a id="download-link" class="hidden inline-flex items-center gap-1 bg-premium-accent text-white px-6 py-3 rounded-lg hover:bg-premium-accent/90 transition-all animate__animated">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                        Download Artwork
                    </a>
                </div>
            </div>
            
            <div class="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
                <p>Tip: Click and drag to paint multiple pixels at once</p>
            </div>
        </div>
    </div>

    <script>
        const colorPicker = document.getElementById('color-picker');
        const eraserBtn = document.getElementById('eraser');
        const clearBtn = document.getElementById('clear');
        const gridSizeSelect = document.getElementById('grid-size');
        const saveBtn = document.getElementById('save');
        const pixelGrid = document.getElementById('pixel-grid');
        const colorPalette = document.getElementById('color-palette');
        const downloadLink = document.getElementById('download-link');
        const currentColorDisplay = document.getElementById('current-color-display');

        let currentColor = '#000000';
        let isDrawing = false;
        let gridSize = parseInt(gridSizeSelect.value);

        // Extended color palette
        const defaultColors = [
            // Basic colors
            '#000000', '#FFFFFF', '#FF0000', '#00FF00', '#0000FF', 
            '#FFFF00', '#FF00FF', '#00FFFF', '#FFA500', '#800080',
            // Additional colors
            '#008000', '#800000', '#008080', '#808000', '#C0C0C0',
            '#FF6347', '#40E0D0', '#EE82EE', '#F5DEB3', '#A0522D',
            '#D2691E', '#6495ED', '#DC143C', '#00BFFF', '#FF8C00'
        ];

        // Create color palette
        function createColorPalette() {
            colorPalette.innerHTML = '';
            defaultColors.forEach(color => {
                const colorBtn = document.createElement('div');
                colorBtn.className = 'color-swatch w-8 h-8 rounded-full cursor-pointer';
                colorBtn.style.backgroundColor = color;
                colorBtn.title = color;
                
                colorBtn.addEventListener('click', () => {
                    currentColor = color;
                    colorPicker.value = color;
                    updateCurrentColorDisplay();
                    
                    // Update active state
                    document.querySelectorAll('.color-swatch').forEach(swatch => {
                        swatch.classList.remove('active');
                    });
                    colorBtn.classList.add('active');
                });
                
                colorPalette.appendChild(colorBtn);
            });
            
            // Set first color as active by default
            if (colorPalette.firstChild) {
                colorPalette.firstChild.classList.add('active');
            }
        }

        // Update current color display
        function updateCurrentColorDisplay() {
            currentColorDisplay.style.backgroundColor = currentColor;
        }

        // Create pixel grid
        function createGrid() {
            pixelGrid.innerHTML = '';
            const pixelSize = Math.min(16, 512 / gridSize); // Adjust pixel size based on grid
            pixelGrid.style.gridTemplateColumns = `repeat(${gridSize}, ${pixelSize}px)`;
            pixelGrid.style.gridTemplateRows = `repeat(${gridSize}, ${pixelSize}px)`;
            pixelGrid.style.width = `${gridSize * pixelSize}px`;
            pixelGrid.style.height = `${gridSize * pixelSize}px`;

            for (let i = 0; i < gridSize * gridSize; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel bg-white';
                pixel.style.width = `${pixelSize}px`;
                pixel.style.height = `${pixelSize}px`;

                // Mouse events for drawing
                pixel.addEventListener('mousedown', (e) => {
                    isDrawing = true;
                    pixel.style.backgroundColor = currentColor;
                    e.preventDefault(); // Prevent text selection
                });

                pixel.addEventListener('mouseenter', () => {
                    if (isDrawing) {
                        pixel.style.backgroundColor = currentColor;
                    }
                });

                // Touch events for mobile
                pixel.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    isDrawing = true;
                    pixel.style.backgroundColor = currentColor;
                });

                pixel.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const element = document.elementFromPoint(touch.clientX, touch.clientY);
                    if (element && element.classList.contains('pixel')) {
                        element.style.backgroundColor = currentColor;
                    }
                });

                pixelGrid.appendChild(pixel);
            }
        }

        // Save artwork as PNG
        function saveArtwork() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const pixelSize = 10; // Fixed size for output image

            canvas.width = gridSize * pixelSize;
            canvas.height = gridSize * pixelSize;

            // Fill canvas with white background
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw pixels
            const pixels = pixelGrid.querySelectorAll('.pixel');
            pixels.forEach((pixel, index) => {
                const row = Math.floor(index / gridSize);
                const col = index % gridSize;
                const bgColor = pixel.style.backgroundColor || '#FFFFFF';

                ctx.fillStyle = bgColor;
                ctx.fillRect(col * pixelSize, row * pixelSize, pixelSize, pixelSize);
                
                // Add grid lines if not white
                if (bgColor !== '#FFFFFF') {
                    ctx.strokeStyle = '#FFFFFF20';
                    ctx.strokeRect(col * pixelSize, row * pixelSize, pixelSize, pixelSize);
                }
            });

            // Create download link
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const dataURL = canvas.toDataURL('image/png');
            downloadLink.href = dataURL;
            downloadLink.download = `pixel-art-${timestamp}.png`;
            downloadLink.classList.remove('hidden');
            downloadLink.classList.add('animate__pulse');
            
            // Auto-click after a short delay
            setTimeout(() => {
                downloadLink.click();
            }, 100);
        }

        // Event listeners
        colorPicker.addEventListener('input', (e) => {
            currentColor = e.target.value;
            updateCurrentColorDisplay();
            
            // Update active swatch if color matches
            document.querySelectorAll('.color-swatch').forEach(swatch => {
                swatch.classList.remove('active');
                if (swatch.style.backgroundColor.toLowerCase() === currentColor.toLowerCase()) {
                    swatch.classList.add('active');
                }
            });
        });

        eraserBtn.addEventListener('click', () => {
            currentColor = '#FFFFFF';
            colorPicker.value = '#FFFFFF';
            updateCurrentColorDisplay();
            
            // Remove active state from all swatches
            document.querySelectorAll('.color-swatch').forEach(swatch => {
                swatch.classList.remove('active');
            });
        });

        clearBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear the entire canvas?')) {
                const pixels = pixelGrid.querySelectorAll('.pixel');
                pixels.forEach(pixel => {
                    pixel.style.backgroundColor = '#FFFFFF';
                });
            }
        });

        gridSizeSelect.addEventListener('change', () => {
            if (confirm('Changing grid size will clear your current artwork. Continue?')) {
                gridSize = parseInt(gridSizeSelect.value);
                createGrid();
            }
        });

        saveBtn.addEventListener('click', saveArtwork);

        document.addEventListener('mouseup', () => {
            isDrawing = false;
        });

        document.addEventListener('touchend', () => {
            isDrawing = false;
        });

        // Initialize
        createColorPalette();
        createGrid();
        updateCurrentColorDisplay();
    </script>
</body>
</html>